# Тестовое задание. api + airflow + grafana + docker
**тестовое: Евгений Литвинов**

### **Задача**
Создайте Airflow ETL процедуры, которые агрегируют данные погоды из внешних источников в базу.

    1. Собирает данные по API и кладет их последовательно в сыром виде в специально созданную таблицу. Запускается каждую минуту.
    2. Записывает в специальную таблицу, поднялась ли средняя температура (за последние 10 минут), либо опустилась, либо осталась прежней относительно предыдущего промежутка в 10 минут. Запускается каждые 10 минут. 

    Проект должен запускаться через docker-compose.
    Передавайте api_key через параметры для безопасности.

### **Источник погодных данных**
https://www.weatherapi.com/
Можно использовать любой город.

### **Дополнительное задание**
* Визуализируйте данные с помощью графиков. 
* Приложения, с помощью которых будете визуализировать данные добавьте в docker-compose.yml файл.
* Приложите инструкцию по запуску.


#Инструкция:

1. Разархивировать
2. Всем подпапкам в дирректории поменять права доступа ```sudo chmod 777 -R *```
3. Из дирректории Выполнить комнаду ```docker-compose up -d```
4. Airflow : 
   1. Заходим на http://localhost:8080/ 
   2. ```USERNAME: user```
   3. ```PASSWORD: bitnami```
   4. Добавляем variable API_KEY с weatherapi.com
   5. Запускаем оба подготовленных Дага:
      1. WeatherApi_get_data
      2. WeatherApi_transform_data
5. Grafana dashboard:
   1. Заходим на http://localhost:3000/ 
   2. ```USERNAME: admin```
   3. ```PASSWORD: admin```
   4. Выбираем из списка дашборд "Sochi - Temperature fluctuation" _(он там один)_
   5. На верхнем графике: 
      1. **Желтым** средняя температура за 10 мин, _(надо подождать пока накопятся данные)_
      2. **Зеленым** значения температуры отдельных запросов
   6. На нижнем:
      1. график флуктуаций средней 10 минутной температуры
      
